---
phase: 02-content-layer
plan: 01
type: execute
wave: 1
depends_on: [01-03]
files_modified: [next.config.ts, src/app/blog/page.tsx, src/app/blog/[slug]/page.tsx, src/lib/blog.ts, package.json]
autonomous: true
requirements: [BLOG-01, BLOG-02]
must_haves:
  truths:
    - "Blog posts are written in local MDX files"
    - "Blog index lists all posts with metadata (title, date)"
    - "Individual posts render correctly with frontmatter support"
  artifacts:
    - path: "src/lib/blog.ts"
      provides: "MDX parsing and fetching logic"
    - path: "src/app/blog/[slug]/page.tsx"
      provides: "Dynamic post rendering"
---

<objective>
Setup the MDX content layer and implement the blog system to allow writing and displaying posts with frontmatter support.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Install MDX Dependencies</name>
  <action>
    Install `@next/mdx`, `@mdx-js/loader`, `@mdx-js/react`, and `gray-matter`.
  </action>
</task>

<task type="auto">
  <name>Task 2: Configure Next.js for MDX</name>
  <action>
    Update `next.config.ts` to support `.md` and `.mdx` extensions using the MDX plugin.
    Create `mdx-components.tsx` in the root (required for App Router MDX).
  </action>
</task>

<task type="auto">
  <name>Task 3: Create Blog Content Utility</name>
  <action>
    Create `src/lib/blog.ts` to:
    - Read files from `content/blog`
    - Parse frontmatter using `gray-matter`
    - Return sorted lists of posts and individual post data.
  </action>
</task>

<task type="auto">
  <name>Task 4: Implement Blog Pages</name>
  <action>
    - Update `src/app/blog/page.tsx` to display the list of posts.
    - Create `src/app/blog/[slug]/page.tsx` to render a single post using `next-mdx-remote/serialize` or a similar approach if needed for dynamic rendering, OR use standard Next.js MDX components if possible.
    - Let's use `next-mdx-remote` for better control over dynamic metadata.
  </action>
</task>

<task type="auto">
  <name>Task 5: Add a Sample Post</name>
  <action>
    Create `content/blog/hello-world.mdx` with sample content and frontmatter to verify the setup.
  </action>
</task>

</tasks>

<verification>
- Blog index shows the "Hello World" post.
- Clicking the post renders the content correctly.
- Frontmatter (title, date) is displayed on both pages.
</verification>
